lane :beta do
    build_app(scheme: "Release",
              workspace: "ios/seasons.xcworkspace",
              include_bitcode: true)
  end

platform :ios do    
    desc 'Fetch certificates and provisioning profiles'
    lane :certificates do
        match(app_identifier: 'com.seasons.seasons')
    end

    desc 'Fetch certificates. Build the iOS application.'
    lane :build do
        certificates
        increment_build_number(xcodeproj: './ios/seasons.xcodeproj')
        gym(scheme: 'Seasons', project: './ios/seasons.xcodeproj', export_method: 'development')
    end

    desc 'Fetch certificates, build and upload to App Center.'
    lane :beta do
        build
        appcenter_upload(
            api_token: ENV["TEST_APPCENTER_API_TOKEN"],
            owner_name: ENV["TEST_APPCENTER_OWNER_NAME"],
            app_name: ENV["APPCENTER_APP_NAME"],
            ipa: './Seasons.ipa'
        )
    end
end
  