{"version":3,"sources":["users.js"],"names":["responseHandler","response","exceptions","ok","json","Auth0Error","attributes","Users","options","client","Client","token","Error","parameters","payload","id","required","get","encodeURIComponent","then","whitelist","rootOnly","metadata","patch","user_metadata"],"mappings":";;;;;;;;;;;AAAA;;AACA;;AACA;;AACA;;AAEA,SAASA,eAAT,CAAyBC,QAAzB,EAAoD;AAAA,MAAjBC,UAAiB,uEAAJ,EAAI;;AAClD,MAAID,QAAQ,CAACE,EAAT,IAAeF,QAAQ,CAACG,IAA5B,EAAkC;AAChC,WAAO,wBAAYH,QAAQ,CAACG,IAArB,EAA2BF,UAA3B,CAAP;AACD;;AACD,QAAM,IAAIG,cAAJ,CAAeJ,QAAf,CAAN;AACD;;AAED,IAAMK,UAAU,GAAG,CACjB,MADiB,EAEjB,UAFiB,EAGjB,SAHiB,EAIjB,SAJiB,EAKjB,eALiB,EAMjB,cANiB,EAOjB,OAPiB,EAQjB,gBARiB,EASjB,YATiB,EAUjB,aAViB,CAAnB;;IAoBqBC,K;AACnB,mBAA0B;AAAA,QAAdC,OAAc,uEAAJ,EAAI;AAAA;AACxB,SAAKC,MAAL,GAAc,IAAIC,mBAAJ,CAAWF,OAAX,CAAd;;AACA,QAAI,CAACA,OAAO,CAACG,KAAb,EAAoB;AAClB,YAAM,IAAIC,KAAJ,CAAU,6BAAV,CAAN;AACD;AACF;;;;8BAYwB;AAAA,UAAjBC,UAAiB,uEAAJ,EAAI;AACvB,UAAMC,OAAO,GAAG,sBACd;AACED,QAAAA,UAAU,EAAE;AACVE,UAAAA,EAAE,EAAE;AAAEC,YAAAA,QAAQ,EAAE;AAAZ;AADM;AADd,OADc,EAMdH,UANc,CAAhB;AAQA,aAAO,KAAKJ,MAAL,CACJQ,GADI,oBACiBC,kBAAkB,CAACJ,OAAO,CAACC,EAAT,CADnC,EAEJI,IAFI,CAEC,UAAAlB,QAAQ;AAAA,eACZD,eAAe,CAACC,QAAD,EAAW;AACxBK,UAAAA,UAAU,EAAVA,UADwB;AAExBc,UAAAA,SAAS,EAAE,IAFa;AAGxBC,UAAAA,QAAQ,EAAE;AAHc,SAAX,CADH;AAAA,OAFT,CAAP;AASD;;;gCAa0B;AAAA,UAAjBR,UAAiB,uEAAJ,EAAI;AACzB,UAAMC,OAAO,GAAG,sBACd;AACED,QAAAA,UAAU,EAAE;AACVE,UAAAA,EAAE,EAAE;AAAEC,YAAAA,QAAQ,EAAE;AAAZ,WADM;AAEVM,UAAAA,QAAQ,EAAE;AAAEN,YAAAA,QAAQ,EAAE;AAAZ;AAFA;AADd,OADc,EAOdH,UAPc,CAAhB;AASA,aAAO,KAAKJ,MAAL,CACJc,KADI,oBACmBL,kBAAkB,CAACJ,OAAO,CAACC,EAAT,CADrC,EACqD;AACxDS,QAAAA,aAAa,EAAEV,OAAO,CAACQ;AADiC,OADrD,EAIJH,IAJI,CAIC,UAAAlB,QAAQ;AAAA,eACZD,eAAe,CAACC,QAAD,EAAW;AACxBK,UAAAA,UAAU,EAAVA,UADwB;AAExBc,UAAAA,SAAS,EAAE,IAFa;AAGxBC,UAAAA,QAAQ,EAAE;AAHc,SAAX,CADH;AAAA,OAJT,CAAP;AAWD","sourcesContent":["import Client from '../networking';\nimport { apply } from '../utils/whitelist';\nimport { toCamelCase } from '../utils/camel';\nimport Auth0Error from './error';\n\nfunction responseHandler(response, exceptions = {}) {\n  if (response.ok && response.json) {\n    return toCamelCase(response.json, exceptions);\n  }\n  throw new Auth0Error(response);\n}\n\nconst attributes = [\n  'name',\n  'nickname',\n  'picture',\n  'user_id',\n  'user_metadata',\n  'app_metadata',\n  'email',\n  'email_verified',\n  'given_name',\n  'family_name'\n];\n\n/**\n * Auth0 Management API User endpoints\n *\n * @export\n * @see https://auth0.com/docs/api/management/v2#!/Users/\n * @class Users\n */\nexport default class Users {\n  constructor(options = {}) {\n    this.client = new Client(options);\n    if (!options.token) {\n      throw new Error('Missing token in parameters');\n    }\n  }\n\n  /**\n   * Returns the user by identifier\n   *\n   * @param {Object} parameters get user by identifier parameters\n   * @param {String} parameters.id identifier of the user to obtain\n   * @returns {Promise}\n   * @see https://auth0.com/docs/api/management/v2#!/Users/get_users_by_id\n   *\n   * @memberof Users\n   */\n  getUser(parameters = {}) {\n    const payload = apply(\n      {\n        parameters: {\n          id: { required: true }\n        }\n      },\n      parameters\n    );\n    return this.client\n      .get(`/api/v2/users/${encodeURIComponent(payload.id)}`)\n      .then(response =>\n        responseHandler(response, {\n          attributes,\n          whitelist: true,\n          rootOnly: true\n        })\n      );\n  }\n\n  /**\n   * Patch a user's `user_metadata`\n   *\n   * @param {Object} parameters patch user metadata parameters\n   * @param {String} parameters.id identifier of the user to patch\n   * @param {Object} parameters.metadata object with attributes to store in user_metadata.\n   * @returns {Promise}\n   * @see https://auth0.com/docs/api/management/v2#!/Users/patch_users_by_id\n   *\n   * @memberof Users\n   */\n  patchUser(parameters = {}) {\n    const payload = apply(\n      {\n        parameters: {\n          id: { required: true },\n          metadata: { required: true }\n        }\n      },\n      parameters\n    );\n    return this.client\n      .patch(`/api/v2/users/${encodeURIComponent(payload.id)}`, {\n        user_metadata: payload.metadata\n      })\n      .then(response =>\n        responseHandler(response, {\n          attributes,\n          whitelist: true,\n          rootOnly: true\n        })\n      );\n  }\n}\n"]}