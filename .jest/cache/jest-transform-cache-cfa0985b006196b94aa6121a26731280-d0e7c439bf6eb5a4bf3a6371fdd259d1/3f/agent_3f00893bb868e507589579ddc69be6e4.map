{"version":3,"sources":["agent.js"],"names":["Agent","url","closeOnLoad","NativeModules","A0Auth0","Promise","reject","Error","resolve","urlHandler","event","hide","Linking","removeEventListener","addEventListener","showUrl","error","redirectURL","oauthParameters","parameters"],"mappings":";;;;;;;;;;;AAAA;;IAEqBA,K;;;;;;;yBACdC,G,EAA0B;AAAA,UAArBC,WAAqB,uEAAP,KAAO;;AAC7B,UAAI,CAACC,2BAAcC,OAAnB,EAA4B;AAC1B,eAAOC,OAAO,CAACC,MAAR,CACL,IAAIC,KAAJ,CACE,uFADF,CADK,CAAP;AAKD;;AAED,aAAO,IAAIF,OAAJ,CAAY,UAACG,OAAD,EAAUF,MAAV,EAAqB;AACtC,YAAMG,UAAU,GAAG,SAAbA,UAAa,CAAAC,KAAK,EAAI;AAC1BP,qCAAcC,OAAd,CAAsBO,IAAtB;;AACAC,+BAAQC,mBAAR,CAA4B,KAA5B,EAAmCJ,UAAnC;;AACAD,UAAAA,OAAO,CAACE,KAAK,CAACT,GAAP,CAAP;AACD,SAJD;;AAKAW,6BAAQE,gBAAR,CAAyB,KAAzB,EAAgCL,UAAhC;;AACAN,mCAAcC,OAAd,CAAsBW,OAAtB,CAA8Bd,GAA9B,EAAmCC,WAAnC,EAAgD,UAACc,KAAD,EAAQC,WAAR,EAAwB;AACtEL,+BAAQC,mBAAR,CAA4B,KAA5B,EAAmCJ,UAAnC;;AACA,cAAIO,KAAJ,EAAW;AACTV,YAAAA,MAAM,CAACU,KAAD,CAAN;AACD,WAFD,MAEO,IAAGC,WAAH,EAAgB;AACrBT,YAAAA,OAAO,CAACS,WAAD,CAAP;AACD,WAFM,MAEA,IAAGf,WAAH,EAAgB;AACrBM,YAAAA,OAAO;AACR;AACF,SATD;AAUD,OAjBM,CAAP;AAkBD;;;qCAEgB;AACf,UAAI,CAACL,2BAAcC,OAAnB,EAA4B;AAC1B,eAAOC,OAAO,CAACC,MAAR,CACL,IAAIC,KAAJ,CACE,uFADF,CADK,CAAP;AAKD;;AAED,aAAO,IAAIF,OAAJ,CAAY,UAACG,OAAD,EAAUF,MAAV,EAAqB;AACtCH,mCAAcC,OAAd,CAAsBc,eAAtB,CAAsC,UAAAC,UAAU,EAAI;AAClDX,UAAAA,OAAO,CAACW,UAAD,CAAP;AACD,SAFD;AAGD,OAJM,CAAP;AAKD","sourcesContent":["import { NativeModules, Linking } from 'react-native';\n\nexport default class Agent {\n  show(url, closeOnLoad = false) {\n    if (!NativeModules.A0Auth0) {\n      return Promise.reject(\n        new Error(\n          'Missing NativeModule. Please make sure you run `react-native link react-native-auth0`'\n        )\n      );\n    }\n\n    return new Promise((resolve, reject) => {\n      const urlHandler = event => {\n        NativeModules.A0Auth0.hide();\n        Linking.removeEventListener('url', urlHandler);\n        resolve(event.url);\n      };\n      Linking.addEventListener('url', urlHandler);\n      NativeModules.A0Auth0.showUrl(url, closeOnLoad, (error, redirectURL) => {\n        Linking.removeEventListener('url', urlHandler);\n        if (error) {\n          reject(error);\n        } else if(redirectURL) {\n          resolve(redirectURL);\n        } else if(closeOnLoad) {\n          resolve();\n        }\n      });\n    });\n  }\n\n  newTransaction() {\n    if (!NativeModules.A0Auth0) {\n      return Promise.reject(\n        new Error(\n          'Missing NativeModule. Please make sure you run `react-native link react-native-auth0`'\n        )\n      );\n    }\n\n    return new Promise((resolve, reject) => {\n      NativeModules.A0Auth0.oauthParameters(parameters => {\n        resolve(parameters);\n      });\n    });\n  }\n}\n"]}