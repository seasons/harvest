4f27bc999dfb4388589b5488327363bf
jest.mock("react-native", function () {
  return {
    AsyncStorage: {
      setItem: jest.fn(function () {
        return new Promise(function (resolve, reject) {
          resolve(null);
        });
      }),
      multiSet: jest.fn(function () {
        return new Promise(function (resolve, reject) {
          resolve(null);
        });
      }),
      getItem: jest.fn(function () {
        return new Promise(function (resolve, reject) {
          resolve({
            bag: {
              items: []
            }
          });
        });
      }),
      multiGet: jest.fn(function () {
        return new Promise(function (resolve, reject) {
          resolve(null);
        });
      }),
      removeItem: jest.fn(function () {
        return new Promise(function (resolve, reject) {
          resolve(null);
        });
      }),
      getAllKeys: jest.fn(function () {
        return new Promise(function (resolve) {
          resolve(["one", "two", "three"]);
        });
      })
    }
  };
});

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

var _toConsumableArray2 = _interopRequireDefault(require("@babel/runtime/helpers/toConsumableArray"));

var _chalk = _interopRequireDefault(require("chalk"));

var _enzyme = _interopRequireDefault(require("enzyme"));

var _enzymeAdapterReact = _interopRequireDefault(require("enzyme-adapter-react-16"));

var _expect = _interopRequireDefault(require("expect"));

var _util = require("util");

var _snapshotDiff = _interopRequireDefault(require("snapshot-diff"));

var _reactNative = require("react-native");

_enzyme.default.configure({
  adapter: new _enzymeAdapterReact.default()
});

_expect.default.extend({
  toMatchDiffSnapshot: _snapshotDiff.default.toMatchDiffSnapshot
});

function mockedModule(path, mockModuleName) {
  jest.mock(path, function () {
    return mockModuleName;
  });
}

var originalConsoleError = console.error;

console.error = function (message) {
  if (typeof message === "string" && (message.includes("is using uppercase HTML. Always use lowercase HTML tags in React.") || /Warning: React does not recognize the `\w+` prop on a DOM element\./.test(message) || /Warning: The tag <\w+> is unrecognized in this browser\./.test(message) || /Warning: Unknown event handler property `\w+`\./.test(message) || /Warning: Received `\w+` for a non-boolean attribute `\w+`\./.test(message) || /Warning: [\w\s]+ has been extracted from react-native core/.test(message))) {} else {
    originalConsoleError(message);
  }
};

_reactNative.NativeModules.ARCocoaConstantsModule = {
  UIApplicationOpenSettingsURLString: "UIApplicationOpenSettingsURLString",
  AREnabled: true
};
_reactNative.NativeModules.ARSwitchBoardModule = {
  presentNavigationViewController: jest.fn(),
  presentModalViewController: jest.fn(),
  presentMediaPreviewController: jest.fn(),
  presentArtworksSet: jest.fn()
};

if (process.env.ALLOW_CONSOLE_LOGS !== "true") {
  var originalLoggers = {
    error: console.error,
    warn: console.warn
  };

  function logToError(type, args, constructorOpt) {
    var explanation = _chalk.default.white("Test failed due to `console." + type + "(\u2026)` call.\n") + _chalk.default.gray("(Disable with ALLOW_CONSOLE_LOGS=true env variable.)\n\n");

    if (args[0] instanceof Error) {
      var msg = explanation + _chalk.default.red(args[0].message);

      var err = new Error(msg);
      err.stack = args[0].stack.replace("Error: " + args[0].message, msg);
      return err;
    } else if (!args[0].includes("is using incorrect casing") && !args[0].includes("is unrecognized in this browser") && ![args[0].includes("React does not recognize the `testID` prop on a DOM element.")]) {
      var _err = new Error(explanation + _chalk.default.red(_util.format.apply(void 0, [args[0]].concat((0, _toConsumableArray2.default)(args.slice(1))))));

      Error.captureStackTrace(_err, constructorOpt);
      return _err;
    }

    return null;
  }

  beforeEach(function (done) {
    var types = ["error", "warn"];
    types.forEach(function (type) {
      if (console[type] === originalLoggers[type]) {
        var handler = function handler() {
          for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {
            args[_key] = arguments[_key];
          }

          var error = logToError(type, args, handler);

          if (error) {
            done.fail(error);
          }
        };

        jest.spyOn(console, type).mockImplementation(handler);
      }
    });
    done();
  });
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNldHVwSmVzdC50cyJdLCJuYW1lcyI6WyJqZXN0IiwibW9jayIsIkFzeW5jU3RvcmFnZSIsInNldEl0ZW0iLCJmbiIsIlByb21pc2UiLCJyZXNvbHZlIiwicmVqZWN0IiwibXVsdGlTZXQiLCJnZXRJdGVtIiwiYmFnIiwiaXRlbXMiLCJtdWx0aUdldCIsInJlbW92ZUl0ZW0iLCJnZXRBbGxLZXlzIiwiRW56eW1lIiwiY29uZmlndXJlIiwiYWRhcHRlciIsIkFkYXB0ZXIiLCJleHBlY3QiLCJleHRlbmQiLCJ0b01hdGNoRGlmZlNuYXBzaG90IiwiZGlmZiIsIm1vY2tlZE1vZHVsZSIsInBhdGgiLCJtb2NrTW9kdWxlTmFtZSIsIm9yaWdpbmFsQ29uc29sZUVycm9yIiwiY29uc29sZSIsImVycm9yIiwibWVzc2FnZSIsImluY2x1ZGVzIiwidGVzdCIsIk5hdGl2ZU1vZHVsZXMiLCJBUkNvY29hQ29uc3RhbnRzTW9kdWxlIiwiVUlBcHBsaWNhdGlvbk9wZW5TZXR0aW5nc1VSTFN0cmluZyIsIkFSRW5hYmxlZCIsIkFSU3dpdGNoQm9hcmRNb2R1bGUiLCJwcmVzZW50TmF2aWdhdGlvblZpZXdDb250cm9sbGVyIiwicHJlc2VudE1vZGFsVmlld0NvbnRyb2xsZXIiLCJwcmVzZW50TWVkaWFQcmV2aWV3Q29udHJvbGxlciIsInByZXNlbnRBcnR3b3Jrc1NldCIsInByb2Nlc3MiLCJlbnYiLCJBTExPV19DT05TT0xFX0xPR1MiLCJvcmlnaW5hbExvZ2dlcnMiLCJ3YXJuIiwibG9nVG9FcnJvciIsInR5cGUiLCJhcmdzIiwiY29uc3RydWN0b3JPcHQiLCJleHBsYW5hdGlvbiIsImNoYWxrIiwid2hpdGUiLCJncmF5IiwiRXJyb3IiLCJtc2ciLCJyZWQiLCJlcnIiLCJzdGFjayIsInJlcGxhY2UiLCJmb3JtYXQiLCJzbGljZSIsImNhcHR1cmVTdGFja1RyYWNlIiwiYmVmb3JlRWFjaCIsImRvbmUiLCJ0eXBlcyIsImZvckVhY2giLCJoYW5kbGVyIiwiZmFpbCIsInNw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QzNDLFlBQU1vQixPQUFPLEdBQUcsU0FBVkEsT0FBVSxHQUFhO0FBQUEsNENBQVRuQixJQUFTO0FBQVRBLFlBQUFBLElBQVM7QUFBQTs7QUFDM0IsY0FBTXBCLEtBQUssR0FBR2tCLFVBQVUsQ0FBQ0MsSUFBRCxFQUFPQyxJQUFQLEVBQWFtQixPQUFiLENBQXhCOztBQUNBLGNBQUl2QyxLQUFKLEVBQVc7QUFDVG9DLFlBQUFBLElBQUksQ0FBQ0ksSUFBTCxDQUFVeEMsS0FBVjtBQUNEO0FBQ0YsU0FMRDs7QUFNQTVCLFFBQUFBLElBQUksQ0FBQ3FFLEtBQUwsQ0FBVzFDLE9BQVgsRUFBb0JvQixJQUFwQixFQUEwQnVCLGtCQUExQixDQUE2Q0gsT0FBN0M7QUFDRDtBQUNGLEtBWEQ7QUFZQUgsSUFBQUEsSUFBSTtBQUNMLEdBZlMsQ0FBVjtBQWdCRCIsInNvdXJjZXNDb250ZW50IjpbIi8vIHJlOiBodHRwczovL2dpdGh1Yi5jb20vZmFjZWJvb2svcmVhY3QtbmF0aXZlL2lzc3Vlcy8xOTk1NVxuLy8gYW5kIGh0dHBzOi8vZ2l0aHViLmNvbS9mYWNlYm9vay9tZXRyby9wdWxsLzE5OFxuLy9cbi8vIGltcG9ydCBhcHBseURlY29yYXRlZERlc2NyaXB0b3IgZnJvbSBcIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvYXBwbHlEZWNvcmF0ZWREZXNjcmlwdG9yXCJcbi8vIGltcG9ydCBpbml0aWFsaXplckRlZmluZVByb3BlcnR5IGZyb20gXCJAYmFiZWwvcnVudGltZS9oZWxwZXJzL2luaXRpYWxpemVyRGVmaW5lUHJvcGVydHlcIlxuLy8gZGVjbGFyZSB2YXIgYmFiZWxIZWxwZXJzOiBhbnlcbi8vIE9iamVjdC5hc3NpZ24oYmFiZWxIZWxwZXJzLCB7IGFwcGx5RGVjb3JhdGVkRGVzY3JpcHRvciwgaW5pdGlhbGl6ZXJEZWZpbmVQcm9wZXJ0eSB9KVxuLy8gaW1wb3J0IFwiQGJhYmVsL3J1bnRpbWVcIlxuXG5pbXBvcnQgY2hhbGsgZnJvbSBcImNoYWxrXCJcbmltcG9ydCBFbnp5bWUgZnJvbSBcImVuenltZVwiXG5pbXBvcnQgQWRhcHRlciBmcm9tIFwiZW56eW1lLWFkYXB0ZXItcmVhY3QtMTZcIlxuaW1wb3J0IGV4cGVjdCBmcm9tIFwiZXhwZWN0XCJcbmltcG9ydCB7IGZvcm1hdCB9IGZyb20gXCJ1dGlsXCJcblxuRW56eW1lLmNvbmZpZ3VyZSh7IGFkYXB0ZXI6IG5ldyBBZGFwdGVyKCkgfSlcblxuLy8gV2FpdGluZyBvbiBodHRwczovL2dpdGh1Yi5jb20vdGh5bWlrZWUvc25hcHNob3QtZGlmZi9wdWxsLzE3XG5pbXBvcnQgZGlmZiBmcm9tIFwic25hcHNob3QtZGlmZlwiXG5leHBlY3QuZXh0ZW5kKHsgdG9NYXRjaERpZmZTbmFwc2hvdDogKGRpZmYgYXMgYW55KS50b01hdGNoRGlmZlNuYXBzaG90IH0pXG5cbmZ1bmN0aW9uIG1vY2tlZE1vZHVsZShwYXRoOiBzdHJpbmcsIG1vY2tNb2R1bGVOYW1lOiBzdHJpbmcpIHtcbiAgamVzdC5tb2NrKHBhdGgsICgpID0+IG1vY2tNb2R1bGVOYW1lKVxufVxuXG5jb25zdCBvcmlnaW5hbENvbnNvbGVFcnJvciA9IGNvbnNvbGUuZXJyb3JcblxuLy8gVE9ETzogUmVtb3ZlIG9uY2Ugd2UncmUgbm8gbG9uZ2VyIHVzaW5nIEpTRE9NIGZvciBlbnp5bWUgc3RhdGljIHJlbmRlcmluZy5cbmNvbnNvbGUuZXJyb3IgPSAobWVzc2FnZT86IGFueSkgPT4ge1xuICBpZiAoXG4gICAgdHlwZW9mIG1lc3NhZ2UgPT09IFwic3RyaW5nXCIgJiZcbiAgICAobWVzc2FnZS5pbmNsdWRlcyhcImlzIHVzaW5nIHVwcGVyY2FzZSBIVE1MLiBBbHdheXMgdXNlIGxvd2VyY2FzZSBIVE1MIHRhZ3MgaW4gUmVhY3QuXCIpIHx8XG4gICAgICAvV2FybmluZzogUmVhY3QgZG9lcyBub3QgcmVjb2duaXplIHRoZSBgXFx3K2AgcHJvcCBvbiBhIERPTSBlbGVtZW50XFwuLy50ZXN0KG1lc3NhZ2UpIHx8XG4gICAgICAvV2FybmluZzogVGhlIHRhZyA8XFx3Kz4gaXMgdW5yZWNvZ25pemVkIGluIHRoaXMgYnJvd3NlclxcLi8udGVzdChtZXNzYWdlKSB8fFxuICAgICAgL1dhcm5pbmc6IFVua25vd24gZXZlbnQgaGFuZGxlciBwcm9wZXJ0eSBgXFx3K2BcXC4vLnRlc3QobWVzc2FnZSkgfHxcbiAgICAgIC9XYXJuaW5nOiBSZWNlaXZlZCBgXFx3K2AgZm9yIGEgbm9uLWJvb2xlYW4gYXR0cmlidXRlIGBcXHcrYFxcLi8udGVzdChtZXNzYWdlKSB8fFxuICAgICAgL1dhcm5pbmc6IFtcXHdcXHNdKyBoYXMgYmVlbiBleHRyYWN0ZWQgZnJvbSByZWFjdC1uYXRpdmUgY29yZS8udGVzdChtZXNzYWdlKSlcbiAgKSB7XG4gICAgLy8gTk9PUFxuICB9IGVsc2Uge1xuICAgIG9yaWdpbmFsQ29uc29sZUVycm9yKG1lc3NhZ2UpXG4gIH1cbn1cblxuLy8gTmF0aXZlIG1vZHVsZXNcbmltcG9ydCB7IE5hdGl2ZU1vZHVsZXMgfSBmcm9tIFwicmVhY3QtbmF0aXZlXCJcbk5hdGl2ZU1vZHVsZXMuQVJDb2NvYUNvbnN0YW50c01vZHVsZSA9IHtcbiAgVUlBcHBsaWNhdGlvbk9wZW5TZXR0aW5nc1VSTFN0cmluZzogXCJVSUFwcGxpY2F0aW9uT3BlblNldHRpbmdzVVJMU3RyaW5nXCIsXG4gIEFSRW5hYmxlZDogdHJ1ZSxcbn1cbk5hdGl2ZU1vZHVsZXMuQVJTd2l0Y2hCb2FyZE1vZHVsZSA9IHtcbiAgcHJlc2VudE5hdmlnYXRpb25WaWV3Q29udHJvbGxlcjogamVzdC5mbigpLFxuICBwcmVzZW50TW9kYWxWaWV3Q29udHJvbGxlcjogamVzdC5mbigpLFxuICBwcmVzZW50TWVkaWFQcmV2aWV3Q29udHJvbGxlcjogamVzdC5mbigpLFxuICBwcmVzZW50QXJ0d29ya3NTZXQ6IGplc3QuZm4oKSxcbn1cblxuZGVjbGFyZSBjb25zdCBwcm9jZXNzOiBhbnlcblxuaWYgKHByb2Nlc3MuZW52LkFMTE9XX0NPTlNPTEVfTE9HUyAhPT0gXCJ0cnVlXCIpIHtcbiAgY29uc3Qgb3JpZ2luYWxMb2dnZXJzID0ge1xuICAgIGVycm9yOiBjb25zb2xlLmVycm9yLFxuICAgIHdhcm46IGNvbnNvbGUud2FybixcbiAgfVxuXG4gIGZ1bmN0aW9uIGxvZ1RvRXJyb3IodHlwZSwgYXJncywgY29uc3RydWN0b3JPcHQ6ICgpID0+IHZvaWQpIHtcbiAgICBjb25zdCBleHBsYW5hdGlvbiA9XG4gICAgICBjaGFsay53aGl0ZShgVGVzdCBmYWlsZWQgZHVlIHRvIFxcYGNvbnNvbGUuJHt0eXBlfSjigKYpXFxgIGNhbGwuXFxuYCkgK1xuICAgICAgY2hhbGsuZ3JheShcIihEaXNhYmxlIHdpdGggQUxMT1dfQ09OU09MRV9MT0dTPXRydWUgZW52IHZhcmlhYmxlLilcXG5cXG5cIilcbiAgICBpZiAoYXJnc1swXSBpbnN0YW5jZW9mIEVycm9yKSB7XG4gICAgICBjb25zdCBtc2cgPSBleHBsYW5hdGlvbiArIGNoYWxrLnJlZChhcmdzWzBdLm1lc3NhZ2UpXG4gICAgICBjb25zdCBlcnIgPSBuZXcgRXJyb3IobXNnKVxuICAgICAgZXJyLnN0YWNrID0gYXJnc1swXS5zdGFjay5yZXBsYWNlKGBFcnJvcjogJHthcmdzWzBdLm1lc3NhZ2V9YCwgbXNnKVxuICAgICAgcmV0dXJuIGVyclxuICAgIH0gZWxzZSBpZiAoXG4gICAgICAvLyBCZWNhdXNlIHdlIHVzZSByZWFjdC1kb20gaW4gdGVzdHMgdG8gcmVuZGVyIHJlYWN0LW5hdGl2ZSBjb21wb25lbnRzLCBhIGZldyB3YXJuaW5ncyBhcmUgYmVpbmcgbG9nZ2VkIHRoYXQgd2UgZG9cbiAgICAgIC8vIG5vdCBjYXJlIGZvciwgc28gaWdub3JlIHRoZXNlLlxuICAgICAgIWFyZ3NbMF0uaW5jbHVkZXMoXCJpcyB1c2luZyBpbmNvcnJlY3QgY2FzaW5nXCIpICYmXG4gICAgICAhYXJnc1swXS5pbmNsdWRlcyhcImlzIHVucmVjb2duaXplZCBpbiB0aGlzIGJyb3dzZXJcIikgJiZcbiAgICAgICFbYXJnc1swXS5pbmNsdWRlcyhcIlJlYWN0IGRvZXMgbm90IHJlY29nbml6ZSB0aGUgYHRlc3RJRGAgcHJvcCBvbiBhIERPTSBlbGVtZW50LlwiKV1cbiAgICApIHtcbiAgICAgIGNvbnN0IGVyciA9IG5ldyBFcnJvcihleHBsYW5hdGlvbiArIGNoYWxrLnJlZChmb3JtYXQoYXJnc1swXSwgLi4uYXJncy5zbGljZSgxKSkpKVxuICAgICAgOyhFcnJvciBhcyBhbnkpLmNhcHR1cmVTdGFja1RyYWNlKGVyciwgY29uc3RydWN0b3JPcHQpXG4gICAgICByZXR1cm4gZXJyXG4gICAgfVxuICAgIHJldHVybiBudWxsXG4gIH1cblxuICBiZWZvcmVFYWNoKGRvbmUgPT4ge1xuICAgIGNvbnN0IHR5cGVzOiBBcnJheTxcImVycm9yXCIgfCBcIndhcm5cIj4gPSBbXCJlcnJvclwiLCBcIndhcm5cIl1cbiAgICB0eXBlcy5mb3JFYWNoKHR5cGUgPT4ge1xuICAgICAgLy8gRG9uJ3Qgc3B5IG9uIGxvZ2dlcnMgdGhhdCBoYXZlIGJlZW4gbW9kaWZpZWQgYnkgdGhlIGN1cnJlbnQgdGVzdC5cbiAgICAgIGlmIChjb25zb2xlW3R5cGVdID09PSBvcmlnaW5hbExvZ2dlcnNbdHlwZV0pIHtcbiAgICAgICAgY29uc3QgaGFuZGxlciA9ICguLi5hcmdzKSA9PiB7XG4gICAgICAgICAgY29uc3QgZXJyb3IgPSBsb2dUb0Vycm9yKHR5cGUsIGFyZ3MsIGhhbmRsZXIpXG4gICAgICAgICAgaWYgKGVycm9yKSB7XG4gICAgICAgICAgICBkb25lLmZhaWwoZXJyb3IpXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGplc3Quc3B5T24oY29uc29sZSwgdHlwZSkubW9ja0ltcGxlbWVudGF0aW9uKGhhbmRsZXIpXG4gICAgICB9XG4gICAgfSlcbiAgICBkb25lKCkgLy8gaXQgaXMgaW1wb3J0YW50IHRvIGNhbGwgdGhpcyBoZXJlIG9yIGV2ZXJ5IHRlc3Qgd2lsbCB0aW1lb3V0XG4gIH0pXG59XG5cbmplc3QubW9jayhcInJlYWN0LW5hdGl2ZVwiLCAoKSA9PiAoe1xuICBBc3luY1N0b3JhZ2U6IHtcbiAgICBzZXRJdGVtOiBqZXN0LmZuKCgpID0+IHtcbiAgICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICAgIHJlc29sdmUobnVsbClcbiAgICAgIH0pXG4gICAgfSksXG4gICAgbXVsdGlTZXQ6IGplc3QuZm4oKCkgPT4ge1xuICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgICAgcmVzb2x2ZShudWxsKVxuICAgICAgfSlcbiAgICB9KSxcbiAgICBnZXRJdGVtOiBqZXN0LmZuKCgpID0+IHtcbiAgICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICAgIHJlc29sdmUoeyBiYWc6IHsgaXRlbXM6IFtdIH0gfSlcbiAgICAgIH0pXG4gICAgfSksXG4gICAgbXVsdGlHZXQ6IGplc3QuZm4oKCkgPT4ge1xuICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgICAgcmVzb2x2ZShudWxsKVxuICAgICAgfSlcbiAgICB9KSxcbiAgICByZW1vdmVJdGVtOiBqZXN0LmZuKCgpID0+IHtcbiAgICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICAgIHJlc29sdmUobnVsbClcbiAgICAgIH0pXG4gICAgfSksXG4gICAgZ2V0QWxsS2V5czogamVzdC5mbigoKSA9PiB7XG4gICAgICByZXR1cm4gbmV3IFByb21pc2UocmVzb2x2ZSA9PiB7XG4gICAgICAgIHJlc29sdmUoW1wib25lXCIsIFwidHdvXCIsIFwidGhyZWVcIl0pXG4gICAgICB9KVxuICAgIH0pLFxuICB9LFxufSkpXG4iXX0=