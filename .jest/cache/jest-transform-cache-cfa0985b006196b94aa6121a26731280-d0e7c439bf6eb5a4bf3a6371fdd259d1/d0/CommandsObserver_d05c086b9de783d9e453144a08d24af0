d988138907fb4809a208f8f0abd0d932
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));

Object.defineProperty(exports, "__esModule", {
  value: true
});

var CommandsObserver = function () {
  function CommandsObserver(uniqueIdProvider) {
    (0, _classCallCheck2.default)(this, CommandsObserver);
    this.uniqueIdProvider = uniqueIdProvider;
    this.listeners = {};
  }

  (0, _createClass2.default)(CommandsObserver, [{
    key: "register",
    value: function register(listener) {
      var _this = this;

      var id = this.uniqueIdProvider.generate();
      this.listeners[id] = listener;
      return {
        remove: function remove() {
          return delete _this.listeners[id];
        }
      };
    }
  }, {
    key: "notify",
    value: function notify(commandName, params) {
      Object.values(this.listeners).forEach(function (listener) {
        return listener(commandName, params);
      });
    }
  }]);
  return CommandsObserver;
}();

exports.CommandsObserver = CommandsObserver;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkNvbW1hbmRzT2JzZXJ2ZXIuanMiXSwibmFtZXMiOlsiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJleHBvcnRzIiwidmFsdWUiLCJDb21tYW5kc09ic2VydmVyIiwidW5pcXVlSWRQcm92aWRlciIsImxpc3RlbmVycyIsImxpc3RlbmVyIiwiaWQiLCJnZW5lcmF0ZSIsInJlbW92ZSIsImNvbW1hbmROYW1lIiwicGFyYW1zIiwidmFsdWVzIiwiZm9yRWFjaCJdLCJtYXBwaW5ncyI6IkFBQUE7Ozs7Ozs7O0FBQ0FBLE1BQU0sQ0FBQ0MsY0FBUCxDQUFzQkMsT0FBdEIsRUFBK0IsWUFBL0IsRUFBNkM7QUFBRUMsRUFBQUEsS0FBSyxFQUFFO0FBQVQsQ0FBN0M7O0lBQ01DLGdCO0FBQ0YsNEJBQVlDLGdCQUFaLEVBQThCO0FBQUE7QUFDMUIsU0FBS0EsZ0JBQUwsR0FBd0JBLGdCQUF4QjtBQUNBLFNBQUtDLFNBQUwsR0FBaUIsRUFBakI7QUFDSDs7Ozs2QkFDUUMsUSxFQUFVO0FBQUE7O0FBQ2YsVUFBTUMsRUFBRSxHQUFHLEtBQUtILGdCQUFMLENBQXNCSSxRQUF0QixFQUFYO0FBQ0EsV0FBS0gsU0FBTCxDQUFlRSxFQUFmLElBQXFCRCxRQUFyQjtBQUNBLGFBQU87QUFDSEcsUUFBQUEsTUFBTSxFQUFFO0FBQUEsaUJBQU0sT0FBTyxLQUFJLENBQUNKLFNBQUwsQ0FBZUUsRUFBZixDQUFiO0FBQUE7QUFETCxPQUFQO0FBR0g7OzsyQkFDTUcsVyxFQUFhQyxNLEVBQVE7QUFDeEJaLE1BQUFBLE1BQU0sQ0FBQ2EsTUFBUCxDQUFjLEtBQUtQLFNBQW5CLEVBQThCUSxPQUE5QixDQUFzQyxVQUFDUCxRQUFEO0FBQUEsZUFBY0EsUUFBUSxDQUFDSSxXQUFELEVBQWNDLE1BQWQsQ0FBdEI7QUFBQSxPQUF0QztBQUNIOzs7OztBQUVMVixPQUFPLENBQUNFLGdCQUFSLEdBQTJCQSxnQkFBM0IiLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmNsYXNzIENvbW1hbmRzT2JzZXJ2ZXIge1xuICAgIGNvbnN0cnVjdG9yKHVuaXF1ZUlkUHJvdmlkZXIpIHtcbiAgICAgICAgdGhpcy51bmlxdWVJZFByb3ZpZGVyID0gdW5pcXVlSWRQcm92aWRlcjtcbiAgICAgICAgdGhpcy5saXN0ZW5lcnMgPSB7fTtcbiAgICB9XG4gICAgcmVnaXN0ZXIobGlzdGVuZXIpIHtcbiAgICAgICAgY29uc3QgaWQgPSB0aGlzLnVuaXF1ZUlkUHJvdmlkZXIuZ2VuZXJhdGUoKTtcbiAgICAgICAgdGhpcy5saXN0ZW5lcnNbaWRdID0gbGlzdGVuZXI7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICByZW1vdmU6ICgpID0+IGRlbGV0ZSB0aGlzLmxpc3RlbmVyc1tpZF1cbiAgICAgICAgfTtcbiAgICB9XG4gICAgbm90aWZ5KGNvbW1hbmROYW1lLCBwYXJhbXMpIHtcbiAgICAgICAgT2JqZWN0LnZhbHVlcyh0aGlzLmxpc3RlbmVycykuZm9yRWFjaCgobGlzdGVuZXIpID0+IGxpc3RlbmVyKGNvbW1hbmROYW1lLCBwYXJhbXMpKTtcbiAgICB9XG59XG5leHBvcnRzLkNvbW1hbmRzT2JzZXJ2ZXIgPSBDb21tYW5kc09ic2VydmVyO1xuIl19