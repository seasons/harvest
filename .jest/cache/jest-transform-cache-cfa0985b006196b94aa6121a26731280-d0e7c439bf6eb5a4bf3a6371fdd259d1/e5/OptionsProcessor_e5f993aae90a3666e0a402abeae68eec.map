{"version":3,"sources":["OptionsProcessor.js"],"names":["Object","defineProperty","exports","value","_","require","OptionsProcessor","store","uniqueIdProvider","colorService","assetService","options","processObject","objectToProcess","forEach","key","processColor","processComponent","processImage","processButtonsPassProps","isEqual","isObject","isArray","endsWith","toNativeColor","resolveFromRequire","button","passProps","id","setPropsForId","undefined","componentId","generate"],"mappings":"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","sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst _ = require(\"lodash\");\nclass OptionsProcessor {\n    constructor(store, uniqueIdProvider, colorService, assetService) {\n        this.store = store;\n        this.uniqueIdProvider = uniqueIdProvider;\n        this.colorService = colorService;\n        this.assetService = assetService;\n    }\n    processOptions(options) {\n        this.processObject(options);\n    }\n    processObject(objectToProcess) {\n        _.forEach(objectToProcess, (value, key) => {\n            this.processColor(key, value, objectToProcess);\n            if (!value) {\n                return;\n            }\n            this.processComponent(key, value, objectToProcess);\n            this.processImage(key, value, objectToProcess);\n            this.processButtonsPassProps(key, value);\n            if (!_.isEqual(key, 'passProps') && (_.isObject(value) || _.isArray(value))) {\n                this.processObject(value);\n            }\n        });\n    }\n    processColor(key, value, options) {\n        if (_.isEqual(key, 'color') || _.endsWith(key, 'Color')) {\n            options[key] = value === null ? 'NoColor' : this.colorService.toNativeColor(value);\n        }\n    }\n    processImage(key, value, options) {\n        if (_.isEqual(key, 'icon') ||\n            _.isEqual(key, 'image') ||\n            _.endsWith(key, 'Icon') ||\n            _.endsWith(key, 'Image')) {\n            options[key] = this.assetService.resolveFromRequire(value);\n        }\n    }\n    processButtonsPassProps(key, value) {\n        if (_.endsWith(key, 'Buttons')) {\n            _.forEach(value, (button) => {\n                if (button.passProps && button.id) {\n                    this.store.setPropsForId(button.id, button.passProps);\n                    button.passProps = undefined;\n                }\n            });\n        }\n    }\n    processComponent(key, value, options) {\n        if (_.isEqual(key, 'component')) {\n            value.componentId = value.id ? value.id : this.uniqueIdProvider.generate('CustomComponent');\n            if (value.passProps) {\n                this.store.setPropsForId(value.componentId, value.passProps);\n            }\n            options[key].passProps = undefined;\n        }\n    }\n}\nexports.OptionsProcessor = OptionsProcessor;\n"]}