047a4c0b6a8765b5b111964fe7818994
var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

var _toConsumableArray2 = _interopRequireDefault(require("@babel/runtime/helpers/toConsumableArray"));

var _chalk = _interopRequireDefault(require("chalk"));

var _enzyme = _interopRequireDefault(require("enzyme"));

var _enzymeAdapterReact = _interopRequireDefault(require("enzyme-adapter-react-16"));

var _expect = _interopRequireDefault(require("expect"));

var _util = require("util");

require("lib/tests/renderUntil");

var _snapshotDiff = _interopRequireDefault(require("snapshot-diff"));

var _reactNative = require("react-native");

_enzyme.default.configure({
  adapter: new _enzymeAdapterReact.default()
});

_expect.default.extend({
  toMatchDiffSnapshot: _snapshotDiff.default.toMatchDiffSnapshot
});

function mockedModule(path, mockModuleName) {
  jest.mock(path, function () {
    return mockModuleName;
  });
}

var originalConsoleError = console.error;

console.error = function (message) {
  if (typeof message === "string" && (message.includes("is using uppercase HTML. Always use lowercase HTML tags in React.") || /Warning: React does not recognize the `\w+` prop on a DOM element\./.test(message) || /Warning: The tag <\w+> is unrecognized in this browser\./.test(message) || /Warning: Unknown event handler property `\w+`\./.test(message) || /Warning: Received `\w+` for a non-boolean attribute `\w+`\./.test(message) || /Warning: [\w\s]+ has been extracted from react-native core/.test(message))) {} else {
    originalConsoleError(message);
  }
};

_reactNative.NativeModules.ARTakeCameraPhotoModule = {
  errorCodes: {
    cameraNotAvailable: "cameraNotAvailable",
    imageMediaNotAvailable: "imageMediaNotAvailable",
    cameraAccessDenied: "cameraAccessDenied",
    saveFailed: "saveFailed"
  }
};
_reactNative.NativeModules.ARCocoaConstantsModule = {
  UIApplicationOpenSettingsURLString: "UIApplicationOpenSettingsURLString",
  AREnabled: true
};
_reactNative.NativeModules.ARSwitchBoardModule = {
  presentNavigationViewController: jest.fn(),
  presentModalViewController: jest.fn(),
  presentMediaPreviewController: jest.fn(),
  presentArtworksSet: jest.fn()
};

if (process.env.ALLOW_CONSOLE_LOGS !== "true") {
  var originalLoggers = {
    error: console.error,
    warn: console.warn
  };

  function logToError(type, args, constructorOpt) {
    var explanation = _chalk.default.white("Test failed due to `console." + type + "(\u2026)` call.\n") + _chalk.default.gray("(Disable with ALLOW_CONSOLE_LOGS=true env variable.)\n\n");

    if (args[0] instanceof Error) {
      var msg = explanation + _chalk.default.red(args[0].message);

      var err = new Error(msg);
      err.stack = args[0].stack.replace("Error: " + args[0].message, msg);
      return err;
    } else if (!args[0].includes("is using incorrect casing") && !args[0].includes("is unrecognized in this browser") && ![args[0].includes("React does not recognize the `testID` prop on a DOM element.")]) {
      var _err = new Error(explanation + _chalk.default.red(_util.format.apply(void 0, [args[0]].concat((0, _toConsumableArray2.default)(args.slice(1))))));

      Error.captureStackTrace(_err, constructorOpt);
      return _err;
    }

    return null;
  }

  beforeEach(function (done) {
    var types = ["error", "warn"];
    types.forEach(function (type) {
      if (console[type] === originalLoggers[type]) {
        var handler = function handler() {
          for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {
            args[_key] = arguments[_key];
          }

          var error = logToError(type, args, handler);

          if (error) {
            done.fail(error);
          }
        };

        jest.spyOn(console, type).mockImplementation(handler);
      }
    });
    done();
  });
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNldHVwSmVzdC50cyJdLCJuYW1lcyI6WyJFbnp5bWUiLCJjb25maWd1cmUiLCJhZGFwdGVyIiwiQWRhcHRlciIsImV4cGVjdCIsImV4dGVuZCIsInRvTWF0Y2hEaWZmU25hcHNob3QiLCJkaWZmIiwibW9ja2VkTW9kdWxlIiwicGF0aCIsIm1vY2tNb2R1bGVOYW1lIiwiamVzdCIsIm1vY2siLCJvcmlnaW5hbENvbnNvbGVFcnJvciIsImNvbnNvbGUiLCJlcnJvciIsIm1lc3NhZ2UiLCJpbmNsdWRlcyIsInRlc3QiLCJOYXRpdmVNb2R1bGVzIiwiQVJUYWtlQ2FtZXJhUGhvdG9Nb2R1bGUiLCJlcnJvckNvZGVzIiwiY2FtZXJhTm90QXZhaWxhYmxlIiwiaW1hZ2VNZWRpYU5vdEF2YWlsYWJsZSIsImNhbWVyYUFjY2Vzc0RlbmllZCIsInNhdmVGYWlsZWQiLCJBUkNvY29hQ29uc3RhbnRzTW9kdWxlIiwiVUlBcHBsaWNhdGlvbk9wZW5TZXR0aW5nc1VSTFN0cmluZyIsIkFSRW5hYmxlZCIsIkFSU3dpdGNoQm9hcmRNb2R1bGUiLCJwcmVzZW50TmF2aWdhdGlvblZpZXdDb250cm9sbGVyIiwiZm4iLCJwcmVzZW50TW9kYWxWaWV3Q29udHJvbGxlciIsInByZXNlbnRNZWRpYVByZXZpZXdDb250cm9sbGVyIiwicHJlc2VudEFydHdvcmtzU2V0IiwicHJvY2VzcyIsImVudiIsIkFMTE9XX0NPTlNPTEVfTE9HUyIsIm9yaWdpbmFsTG9nZ2VycyIsIndhcm4iLCJsb2dUb0Vycm9yIiwidHlwZSIsImFyZ3MiLCJjb25zdHJ1Y3Rvck9wdCIsImV4cGxhbmF0aW9uIiwiY2hhbGsiLCJ3aGl0ZSIsImdyYXkiLCJFcnJvciIsIm1zZyIsInJlZCIsImVyciIsInN0YWNrIiwicmVwbGFjZSIsImZvcm1hdCIsInNsaWNlIiwiY2FwdHVyZVN0YWNrVHJhY2UiLCJiZWZvcmVFYWNoIiwiZG9uZSIsInR5cGVzIiwiZm9yRWFjaCIsImhhbmRsZXIiLCJmYWlsIiwic3B5T24iLCJt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LFVBQVUsQ0FBQ0MsSUFBRCxFQUFPQyxJQUFQLEVBQWFtQixPQUFiLENBQXhCOztBQUNBLGNBQUk5QyxLQUFKLEVBQVc7QUFDVDJDLFlBQUFBLElBQUksQ0FBQ0ksSUFBTCxDQUFVL0MsS0FBVjtBQUNEO0FBQ0YsU0FMRDs7QUFNQUosUUFBQUEsSUFBSSxDQUFDb0QsS0FBTCxDQUFXakQsT0FBWCxFQUFvQjJCLElBQXBCLEVBQTBCdUIsa0JBQTFCLENBQTZDSCxPQUE3QztBQUNEO0FBQ0YsS0FYRDtBQVlBSCxJQUFBQSxJQUFJO0FBQ0wsR0FmUyxDQUFWO0FBZ0JEIiwic291cmNlc0NvbnRlbnQiOlsiLy8gcmU6IGh0dHBzOi8vZ2l0aHViLmNvbS9mYWNlYm9vay9yZWFjdC1uYXRpdmUvaXNzdWVzLzE5OTU1XG4vLyBhbmQgaHR0cHM6Ly9naXRodWIuY29tL2ZhY2Vib29rL21ldHJvL3B1bGwvMTk4XG4vL1xuLy8gaW1wb3J0IGFwcGx5RGVjb3JhdGVkRGVzY3JpcHRvciBmcm9tIFwiQGJhYmVsL3J1bnRpbWUvaGVscGVycy9hcHBseURlY29yYXRlZERlc2NyaXB0b3JcIlxuLy8gaW1wb3J0IGluaXRpYWxpemVyRGVmaW5lUHJvcGVydHkgZnJvbSBcIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvaW5pdGlhbGl6ZXJEZWZpbmVQcm9wZXJ0eVwiXG4vLyBkZWNsYXJlIHZhciBiYWJlbEhlbHBlcnM6IGFueVxuLy8gT2JqZWN0LmFzc2lnbihiYWJlbEhlbHBlcnMsIHsgYXBwbHlEZWNvcmF0ZWREZXNjcmlwdG9yLCBpbml0aWFsaXplckRlZmluZVByb3BlcnR5IH0pXG4vLyBpbXBvcnQgXCJAYmFiZWwvcnVudGltZVwiXG5cbmltcG9ydCBjaGFsayBmcm9tIFwiY2hhbGtcIlxuaW1wb3J0IEVuenltZSBmcm9tIFwiZW56eW1lXCJcbmltcG9ydCBBZGFwdGVyIGZyb20gXCJlbnp5bWUtYWRhcHRlci1yZWFjdC0xNlwiXG5pbXBvcnQgZXhwZWN0IGZyb20gXCJleHBlY3RcIlxuaW1wb3J0IHsgZm9ybWF0IH0gZnJvbSBcInV0aWxcIlxuXG5pbXBvcnQgXCJsaWIvdGVzdHMvcmVuZGVyVW50aWxcIlxuRW56eW1lLmNvbmZpZ3VyZSh7IGFkYXB0ZXI6IG5ldyBBZGFwdGVyKCkgfSlcblxuLy8gV2FpdGluZyBvbiBodHRwczovL2dpdGh1Yi5jb20vdGh5bWlrZWUvc25hcHNob3QtZGlmZi9wdWxsLzE3XG5pbXBvcnQgZGlmZiBmcm9tIFwic25hcHNob3QtZGlmZlwiXG5leHBlY3QuZXh0ZW5kKHsgdG9NYXRjaERpZmZTbmFwc2hvdDogKGRpZmYgYXMgYW55KS50b01hdGNoRGlmZlNuYXBzaG90IH0pXG5cbmZ1bmN0aW9uIG1vY2tlZE1vZHVsZShwYXRoOiBzdHJpbmcsIG1vY2tNb2R1bGVOYW1lOiBzdHJpbmcpIHtcbiAgamVzdC5tb2NrKHBhdGgsICgpID0+IG1vY2tNb2R1bGVOYW1lKVxufVxuXG5jb25zdCBvcmlnaW5hbENvbnNvbGVFcnJvciA9IGNvbnNvbGUuZXJyb3JcblxuLy8gVE9ETzogUmVtb3ZlIG9uY2Ugd2UncmUgbm8gbG9uZ2VyIHVzaW5nIEpTRE9NIGZvciBlbnp5bWUgc3RhdGljIHJlbmRlcmluZy5cbmNvbnNvbGUuZXJyb3IgPSAobWVzc2FnZT86IGFueSkgPT4ge1xuICBpZiAoXG4gICAgdHlwZW9mIG1lc3NhZ2UgPT09IFwic3RyaW5nXCIgJiZcbiAgICAobWVzc2FnZS5pbmNsdWRlcyhcImlzIHVzaW5nIHVwcGVyY2FzZSBIVE1MLiBBbHdheXMgdXNlIGxvd2VyY2FzZSBIVE1MIHRhZ3MgaW4gUmVhY3QuXCIpIHx8XG4gICAgICAvV2FybmluZzogUmVhY3QgZG9lcyBub3QgcmVjb2duaXplIHRoZSBgXFx3K2AgcHJvcCBvbiBhIERPTSBlbGVtZW50XFwuLy50ZXN0KG1lc3NhZ2UpIHx8XG4gICAgICAvV2FybmluZzogVGhlIHRhZyA8XFx3Kz4gaXMgdW5yZWNvZ25pemVkIGluIHRoaXMgYnJvd3NlclxcLi8udGVzdChtZXNzYWdlKSB8fFxuICAgICAgL1dhcm5pbmc6IFVua25vd24gZXZlbnQgaGFuZGxlciBwcm9wZXJ0eSBgXFx3K2BcXC4vLnRlc3QobWVzc2FnZSkgfHxcbiAgICAgIC9XYXJuaW5nOiBSZWNlaXZlZCBgXFx3K2AgZm9yIGEgbm9uLWJvb2xlYW4gYXR0cmlidXRlIGBcXHcrYFxcLi8udGVzdChtZXNzYWdlKSB8fFxuICAgICAgL1dhcm5pbmc6IFtcXHdcXHNdKyBoYXMgYmVlbiBleHRyYWN0ZWQgZnJvbSByZWFjdC1uYXRpdmUgY29yZS8udGVzdChtZXNzYWdlKSlcbiAgKSB7XG4gICAgLy8gTk9PUFxuICB9IGVsc2Uge1xuICAgIG9yaWdpbmFsQ29uc29sZUVycm9yKG1lc3NhZ2UpXG4gIH1cbn1cblxuLy8gTmF0aXZlIG1vZHVsZXNcbmltcG9ydCB7IE5hdGl2ZU1vZHVsZXMgfSBmcm9tIFwicmVhY3QtbmF0aXZlXCJcbk5hdGl2ZU1vZHVsZXMuQVJUYWtlQ2FtZXJhUGhvdG9Nb2R1bGUgPSB7XG4gIGVycm9yQ29kZXM6IHtcbiAgICBjYW1lcmFOb3RBdmFpbGFibGU6IFwiY2FtZXJhTm90QXZhaWxhYmxlXCIsXG4gICAgaW1hZ2VNZWRpYU5vdEF2YWlsYWJsZTogXCJpbWFnZU1lZGlhTm90QXZhaWxhYmxlXCIsXG4gICAgY2FtZXJhQWNjZXNzRGVuaWVkOiBcImNhbWVyYUFjY2Vzc0RlbmllZFwiLFxuICAgIHNhdmVGYWlsZWQ6IFwic2F2ZUZhaWxlZFwiLFxuICB9LFxufVxuTmF0aXZlTW9kdWxlcy5BUkNvY29hQ29uc3RhbnRzTW9kdWxlID0ge1xuICBVSUFwcGxpY2F0aW9uT3BlblNldHRpbmdzVVJMU3RyaW5nOiBcIlVJQXBwbGljYXRpb25PcGVuU2V0dGluZ3NVUkxTdHJpbmdcIixcbiAgQVJFbmFibGVkOiB0cnVlLFxufVxuTmF0aXZlTW9kdWxlcy5BUlN3aXRjaEJvYXJkTW9kdWxlID0ge1xuICBwcmVzZW50TmF2aWdhdGlvblZpZXdDb250cm9sbGVyOiBqZXN0LmZuKCksXG4gIHByZXNlbnRNb2RhbFZpZXdDb250cm9sbGVyOiBqZXN0LmZuKCksXG4gIHByZXNlbnRNZWRpYVByZXZpZXdDb250cm9sbGVyOiBqZXN0LmZuKCksXG4gIHByZXNlbnRBcnR3b3Jrc1NldDogamVzdC5mbigpLFxufVxuXG5kZWNsYXJlIGNvbnN0IHByb2Nlc3M6IGFueVxuXG5pZiAocHJvY2Vzcy5lbnYuQUxMT1dfQ09OU09MRV9MT0dTICE9PSBcInRydWVcIikge1xuICBjb25zdCBvcmlnaW5hbExvZ2dlcnMgPSB7XG4gICAgZXJyb3I6IGNvbnNvbGUuZXJyb3IsXG4gICAgd2FybjogY29uc29sZS53YXJuLFxuICB9XG5cbiAgZnVuY3Rpb24gbG9nVG9FcnJvcih0eXBlLCBhcmdzLCBjb25zdHJ1Y3Rvck9wdDogKCkgPT4gdm9pZCkge1xuICAgIGNvbnN0IGV4cGxhbmF0aW9uID1cbiAgICAgIGNoYWxrLndoaXRlKGBUZXN0IGZhaWxlZCBkdWUgdG8gXFxgY29uc29sZS4ke3R5cGV9KOKApilcXGAgY2FsbC5cXG5gKSArXG4gICAgICBjaGFsay5ncmF5KFwiKERpc2FibGUgd2l0aCBBTExPV19DT05TT0xFX0xPR1M9dHJ1ZSBlbnYgdmFyaWFibGUuKVxcblxcblwiKVxuICAgIGlmIChhcmdzWzBdIGluc3RhbmNlb2YgRXJyb3IpIHtcbiAgICAgIGNvbnN0IG1zZyA9IGV4cGxhbmF0aW9uICsgY2hhbGsucmVkKGFyZ3NbMF0ubWVzc2FnZSlcbiAgICAgIGNvbnN0IGVyciA9IG5ldyBFcnJvcihtc2cpXG4gICAgICBlcnIuc3RhY2sgPSBhcmdzWzBdLnN0YWNrLnJlcGxhY2UoYEVycm9yOiAke2FyZ3NbMF0ubWVzc2FnZX1gLCBtc2cpXG4gICAgICByZXR1cm4gZXJyXG4gICAgfSBlbHNlIGlmIChcbiAgICAgIC8vIEJlY2F1c2Ugd2UgdXNlIHJlYWN0LWRvbSBpbiB0ZXN0cyB0byByZW5kZXIgcmVhY3QtbmF0aXZlIGNvbXBvbmVudHMsIGEgZmV3IHdhcm5pbmdzIGFyZSBiZWluZyBsb2dnZWQgdGhhdCB3ZSBkb1xuICAgICAgLy8gbm90IGNhcmUgZm9yLCBzbyBpZ25vcmUgdGhlc2UuXG4gICAgICAhYXJnc1swXS5pbmNsdWRlcyhcImlzIHVzaW5nIGluY29ycmVjdCBjYXNpbmdcIikgJiZcbiAgICAgICFhcmdzWzBdLmluY2x1ZGVzKFwiaXMgdW5yZWNvZ25pemVkIGluIHRoaXMgYnJvd3NlclwiKSAmJlxuICAgICAgIVthcmdzWzBdLmluY2x1ZGVzKFwiUmVhY3QgZG9lcyBub3QgcmVjb2duaXplIHRoZSBgdGVzdElEYCBwcm9wIG9uIGEgRE9NIGVsZW1lbnQuXCIpXVxuICAgICkge1xuICAgICAgY29uc3QgZXJyID0gbmV3IEVycm9yKGV4cGxhbmF0aW9uICsgY2hhbGsucmVkKGZvcm1hdChhcmdzWzBdLCAuLi5hcmdzLnNsaWNlKDEpKSkpXG4gICAgICA7KEVycm9yIGFzIGFueSkuY2FwdHVyZVN0YWNrVHJhY2UoZXJyLCBjb25zdHJ1Y3Rvck9wdClcbiAgICAgIHJldHVybiBlcnJcbiAgICB9XG4gICAgcmV0dXJuIG51bGxcbiAgfVxuXG4gIGJlZm9yZUVhY2goZG9uZSA9PiB7XG4gICAgY29uc3QgdHlwZXM6IEFycmF5PFwiZXJyb3JcIiB8IFwid2FyblwiPiA9IFtcImVycm9yXCIsIFwid2FyblwiXVxuICAgIHR5cGVzLmZvckVhY2godHlwZSA9PiB7XG4gICAgICAvLyBEb24ndCBzcHkgb24gbG9nZ2VycyB0aGF0IGhhdmUgYmVlbiBtb2RpZmllZCBieSB0aGUgY3VycmVudCB0ZXN0LlxuICAgICAgaWYgKGNvbnNvbGVbdHlwZV0gPT09IG9yaWdpbmFsTG9nZ2Vyc1t0eXBlXSkge1xuICAgICAgICBjb25zdCBoYW5kbGVyID0gKC4uLmFyZ3MpID0+IHtcbiAgICAgICAgICBjb25zdCBlcnJvciA9IGxvZ1RvRXJyb3IodHlwZSwgYXJncywgaGFuZGxlcilcbiAgICAgICAgICBpZiAoZXJyb3IpIHtcbiAgICAgICAgICAgIGRvbmUuZmFpbChlcnJvcilcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgamVzdC5zcHlPbihjb25zb2xlLCB0eXBlKS5tb2NrSW1wbGVtZW50YXRpb24oaGFuZGxlcilcbiAgICAgIH1cbiAgICB9KVxuICAgIGRvbmUoKSAvLyBpdCBpcyBpbXBvcnRhbnQgdG8gY2FsbCB0aGlzIGhlcmUgb3IgZXZlcnkgdGVzdCB3aWxsIHRpbWVvdXRcbiAgfSlcbn1cbiJdfQ==