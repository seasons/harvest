f8e5f79c11949b32fd47bc26b2fb425b
Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.reset = reset;
exports.toArray = toArray;
exports.append = append;
exports.appendTransform = appendTransform;
exports.identity = void 0;
var DEG_TO_RAD = Math.PI / 180;
var identity = [1, 0, 0, 1, 0, 0];
exports.identity = identity;
var a = 1;
var b = 0;
var c = 0;
var d = 1;
var tx = 0;
var ty = 0;
var hasInitialState = true;

function reset() {
  if (hasInitialState) {
    return;
  }

  a = d = 1;
  b = c = tx = ty = 0;
  hasInitialState = true;
}

function toArray() {
  if (hasInitialState) {
    return identity;
  }

  return [a, b, c, d, tx, ty];
}

function append(a2, b2, c2, d2, tx2, ty2) {
  var change = a2 !== 1 || b2 !== 0 || c2 !== 0 || d2 !== 1;
  var translate = tx2 !== 0 || ty2 !== 0;

  if (!change && !translate) {
    return;
  }

  if (hasInitialState) {
    hasInitialState = false;
    a = a2;
    b = b2;
    c = c2;
    d = d2;
    tx = tx2;
    ty = ty2;
    return;
  }

  var a1 = a;
  var b1 = b;
  var c1 = c;
  var d1 = d;

  if (change) {
    a = a1 * a2 + c1 * b2;
    b = b1 * a2 + d1 * b2;
    c = a1 * c2 + c1 * d2;
    d = b1 * c2 + d1 * d2;
  }

  if (translate) {
    tx = a1 * tx2 + c1 * ty2 + tx;
    ty = b1 * tx2 + d1 * ty2 + ty;
  }
}

function appendTransform(x, y, scaleX, scaleY, rotation, skewX, skewY, regX, regY) {
  if (x === 0 && y === 0 && scaleX === 1 && scaleY === 1 && rotation === 0 && skewX === 0 && skewY === 0 && regX === 0 && regY === 0) {
    return;
  }

  var cos, sin;

  if (rotation % 360) {
    var r = rotation * DEG_TO_RAD;
    cos = Math.cos(r);
    sin = Math.sin(r);
  } else {
    cos = 1;
    sin = 0;
  }

  var a2 = cos * scaleX;
  var b2 = sin * scaleX;
  var c2 = -sin * scaleY;
  var d2 = cos * scaleY;

  if (skewX || skewY) {
    var b1 = Math.tan(skewY * DEG_TO_RAD);
    var c1 = Math.tan(skewX * DEG_TO_RAD);
    append(a2 + c1 * b2, b1 * a2 + b2, c2 + c1 * d2, b1 * c2 + d2, x, y);
  } else {
    append(a2, b2, c2, d2, x, y);
  }

  if (regX || regY) {
    tx -= regX * a + regY * c;
    ty -= regX * b + regY * d;
    hasInitialState = false;
  }
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIk1hdHJpeDJELnRzIl0sIm5hbWVzIjpbIkRFR19UT19SQUQiLCJNYXRoIiwiaWRlbnRpdHkiLCJhIiwiYiIsImMiLCJkIiwidHgiLCJ0eSIsImhhc0luaXRpYWxTdGF0ZSIsImNoYW5nZSIsImEyIiwiYjIiLCJjMiIsImQyIiwidHJhbnNsYXRlIiwidHgyIiwidHkyIiwiYTEiLCJiMSIsImMxIiwiZDEiLCJ4IiwieSIsInNjYWxlWCIsInNjYWxlWSIsInJvdGF0aW9uIiwic2tld1giLCJza2V3WSIsInJlZ1giLCJyZWdZIiwiciIsImNvcyIsInNpbiIsImFwcGVuZCJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFJQSxJQUFNQSxVQUFVLEdBQUdDLElBQUksQ0FBSkEsRUFBQUEsR0FBbkIsR0FBQTtBQUVPLElBQU1DLFFBQTBELEdBQUcsQ0FBQSxDQUFBLEVBQUEsQ0FBQSxFQUFBLENBQUEsRUFBQSxDQUFBLEVBQUEsQ0FBQSxFQUFuRSxDQUFtRSxDQUFuRTs7QUFTUCxJQUFJQyxDQUFDLEdBQUwsQ0FBQTtBQUNBLElBQUlDLENBQUMsR0FBTCxDQUFBO0FBQ0EsSUFBSUMsQ0FBQyxHQUFMLENBQUE7QUFDQSxJQUFJQyxDQUFDLEdBQUwsQ0FBQTtBQUNBLElBQUlDLEVBQUUsR0FBTixDQUFBO0FBQ0EsSUFBSUMsRUFBRSxHQUFOLENBQUE7QUFDQSxJQUFJQyxlQUFlLEdBQW5CLElBQUE7O0FBa0JPLFNBQUEsS0FBQSxHQUFpQjtBQUN0QixNQUFBLGVBQUEsRUFBcUI7QUFDbkI7QUFFRk47O0FBQUFBLEVBQUFBLENBQUMsR0FBR0csQ0FBQyxHQUFMSCxDQUFBQTtBQUNBQyxFQUFBQSxDQUFDLEdBQUdDLENBQUMsR0FBR0UsRUFBRSxHQUFHQyxFQUFFLEdBQWZKLENBQUFBO0FBQ0FLLEVBQUFBLGVBQWUsR0FBZkEsSUFBQUE7QUFRSzs7QUFBQSxTQUFBLE9BQUEsR0FBcUU7QUFDMUUsTUFBQSxlQUFBLEVBQXFCO0FBQ25CLFdBQUEsUUFBQTtBQUVGOztBQUFBLFNB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Yi5jb20vQ3JlYXRlSlMvRWFzZWxKUy9ibG9iLzYzMWNkZmZiODVlZmY5NDEzZGFiNDNiNDY3NmYwNTliNDIzMmQyOTEvc3JjL2Vhc2VsanMvZ2VvbS9NYXRyaXgyRC5qc1xuICovXG5jb25zdCBERUdfVE9fUkFEID0gTWF0aC5QSSAvIDE4MDtcblxuZXhwb3J0IGNvbnN0IGlkZW50aXR5OiBbbnVtYmVyLCBudW1iZXIsIG51bWJlciwgbnVtYmVyLCBudW1iZXIsIG51bWJlcl0gPSBbXG4gIDEsXG4gIDAsXG4gIDAsXG4gIDEsXG4gIDAsXG4gIDAsXG5dO1xuXG5sZXQgYSA9IDE7XG5sZXQgYiA9IDA7XG5sZXQgYyA9IDA7XG5sZXQgZCA9IDE7XG5sZXQgdHggPSAwO1xubGV0IHR5ID0gMDtcbmxldCBoYXNJbml0aWFsU3RhdGUgPSB0cnVlO1xuXG4vKipcbiAqIFJlcHJlc2VudHMgYW4gYWZmaW5lIHRyYW5zZm9ybWF0aW9uIG1hdHJpeCwgYW5kIHByb3ZpZGVzIHRvb2xzIGZvciBjb25jYXRlbmF0aW5nIHRyYW5zZm9ybXMuXG4gKlxuICogVGhpcyBtYXRyaXggY2FuIGJlIHZpc3VhbGl6ZWQgYXM6XG4gKlxuICogXHRbIGEgIGMgIHR4XG4gKiBcdCAgYiAgZCAgdHlcbiAqIFx0ICAwICAwICAxICBdXG4gKlxuICogTm90ZSB0aGUgbG9jYXRpb25zIG9mIGIgYW5kIGMuXG4gKiovXG5cbi8qKlxuICogUmVzZXQgY3VycmVudCBtYXRyaXggdG8gYW4gaWRlbnRpdHkgbWF0cml4LlxuICogQG1ldGhvZCByZXNldFxuICoqL1xuZXhwb3J0IGZ1bmN0aW9uIHJlc2V0KCkge1xuICBpZiAoaGFzSW5pdGlhbFN0YXRlKSB7XG4gICAgcmV0dXJuO1xuICB9XG4gIGEgPSBkID0gMTtcbiAgYiA9IGMgPSB0eCA9IHR5ID0gMDtcbiAgaGFzSW5pdGlhbFN0YXRlID0gdHJ1ZTtcbn1cblxuLyoqXG4gKiBSZXR1cm5zIGFuIGFycmF5IHdpdGggY3VycmVudCBtYXRyaXggdmFsdWVzLlxuICogQG1ldGhvZCB0b0FycmF5XG4gKiBAcmV0dXJuIHtBcnJheX0gYW4gYXJyYXkgd2l0aCBjdXJyZW50IG1hdHJpeCB2YWx1ZXMuXG4gKiovXG5leHBvcnQgZnVuY3Rpb24gdG9BcnJheSgpOiBbbnVtYmVyLCBudW1iZXIsIG51bWJlciwgbnVtYmVyLCBudW1iZXIsIG51bWJlcl0ge1xuICBpZiAoaGFzSW5pdGlhbFN0YXRlKSB7XG4gICAgcmV0dXJuIGlkZW50aXR5O1xuICB9XG4gIHJldHVybiBbYSwgYiwgYywgZCwgdHgsIHR5XTtcbn1cblxuLyoqXG4gKiBBcHBlbmRzIHRoZSBzcGVjaWZpZWQgbWF0cml4IHByb3BlcnRpZXMgdG8gdGhpcyBtYXRyaXguIEFsbCBwYXJhbWV0ZXJzIGFyZSByZXF1aXJlZC5cbiAqIFRoaXMgaXMgdGhlIGVxdWl2YWxlbnQgb2YgbXVsdGlwbHlpbmcgYCh0aGlzIG1hdHJpeCkgKiAoc3BlY2lmaWVkIG1hdHJpeClgLlxuICogQG1ldGhvZCBhcHBlbmRcbiAqIEBwYXJhbSB7TnVtYmVyfSBhMlxuICogQHBhcmFtIHtOdW1iZXJ9IGIyXG4gKiBAcGFyYW0ge051bWJlcn0gYzJcbiAqIEBwYXJhbSB7TnVtYmVyfSBkMlxuICogQHBhcmFtIHtOdW1iZXJ9IHR4MlxuICogQHBhcmFtIHtOdW1iZXJ9IHR5MlxuICoqL1xuZXhwb3J0IGZ1bmN0aW9uIGFwcGVuZChcbiAgYTI6IG51bWJlcixcbiAgYjI6IG51bWJlcixcbiAgYzI6IG51bWJlcixcbiAgZDI6IG51bWJlcixcbiAgdHgyOiBudW1iZXIsXG4gIHR5MjogbnVtYmVyLFxuKSB7XG4gIGNvbnN0IGNoYW5nZSA9IGEyICE9PSAxIHx8IGIyICE9PSAwIHx8IGMyICE9PSAwIHx8IGQyICE9PSAxO1xuICBjb25zdCB0cmFuc2xhdGUgPSB0eDIgIT09IDAgfHwgdHkyICE9PSAwO1xuICBpZiAoIWNoYW5nZSAmJiAhdHJhbnNsYXRlKSB7XG4gICAgcmV0dXJuO1xuICB9XG4gIGlmIChoYXNJbml0aWFsU3RhdGUpIHtcbiAgICBoYXNJbml0aWFsU3RhdGUgPSBmYWxzZTtcbiAgICBhID0gYTI7XG4gICAgYiA9IGIyO1xuICAgIGMgPSBjMjtcbiAgICBkID0gZDI7XG4gICAgdHggPSB0eDI7XG4gICAgdHkgPSB0eTI7XG4gICAgcmV0dXJuO1xuICB9XG4gIGNvbnN0IGExID0gYTtcbiAgY29uc3QgYjEgPSBiO1xuICBjb25zdCBjMSA9IGM7XG4gIGNvbnN0IGQxID0gZDtcbiAgaWYgKGNoYW5nZSkge1xuICAgIGEgPSBhMSAqIGEyICsgYzEgKiBiMjtcbiAgICBiID0gYjEgKiBhMiArIGQxICogYjI7XG4gICAgYyA9IGExICogYzIgKyBjMSAqIGQyO1xuICAgIGQgPSBiMSAqIGMyICsgZDEgKiBkMjtcbiAgfVxuICBpZiAodHJhbnNsYXRlKSB7XG4gICAgdHggPSBhMSAqIHR4MiArIGMxICogdHkyICsgdHg7XG4gICAgdHkgPSBiMSAqIHR4MiArIGQxICogdHkyICsgdHk7XG4gIH1cbn1cblxuLyoqXG4gKiBHZW5lcmF0ZXMgbWF0cml4IHByb3BlcnRpZXMgZnJvbSB0aGUgc3BlY2lmaWVkIGRpc3BsYXkgb2JqZWN0IHRyYW5zZm9ybSBwcm9wZXJ0aWVzLCBhbmQgYXBwZW5kcyB0aGVtIHRvIHRoaXMgbWF0cml4LlxuICogRm9yIGV4YW1wbGUsIHlvdSBjYW4gdXNlIHRoaXMgdG8gZ2VuZXJhdGUgYSBtYXRyaXggcmVwcmVzZW50aW5nIHRoZSB0cmFuc2Zvcm1hdGlvbnMgb2YgYSBkaXNwbGF5IG9iamVjdDpcbiAqXG4gKiBcdHJlc2V0KCk7XG4gKiBcdGFwcGVuZFRyYW5zZm9ybShvLngsIG8ueSwgby5zY2FsZVgsIG8uc2NhbGVZLCBvLnJvdGF0aW9uKTtcbiAqIFx0dmFyIG1hdHJpeCA9IHRvQXJyYXkoKVxuICpcbiAqIEBtZXRob2QgYXBwZW5kVHJhbnNmb3JtXG4gKiBAcGFyYW0ge051bWJlcn0geFxuICogQHBhcmFtIHtOdW1iZXJ9IHlcbiAqIEBwYXJhbSB7TnVtYmVyfSBzY2FsZVhcbiAqIEBwYXJhbSB7TnVtYmVyfSBzY2FsZVlcbiAqIEBwYXJhbSB7TnVtYmVyfSByb3RhdGlvblxuICogQHBhcmFtIHtOdW1iZXJ9IHNrZXdYXG4gKiBAcGFyYW0ge051bWJlcn0gc2tld1lcbiAqIEBwYXJhbSB7TnVtYmVyfSByZWdYIE9wdGlvbmFsLlxuICogQHBhcmFtIHtOdW1iZXJ9IHJlZ1kgT3B0aW9uYWwuXG4gKiovXG5leHBvcnQgZnVuY3Rpb24gYXBwZW5kVHJhbnNmb3JtKFxuICB4OiBudW1iZXIsXG4gIHk6IG51bWJlcixcbiAgc2NhbGVYOiBudW1iZXIsXG4gIHNjYWxlWTogbnVtYmVyLFxuICByb3RhdGlvbjogbnVtYmVyLFxuICBza2V3WDogbnVtYmVyLFxuICBza2V3WTogbnVtYmVyLFxuICByZWdYOiBudW1iZXIsXG4gIHJlZ1k6IG51bWJlcixcbikge1xuICBpZiAoXG4gICAgeCA9PT0gMCAmJlxuICAgIHkgPT09IDAgJiZcbiAgICBzY2FsZVggPT09IDEgJiZcbiAgICBzY2FsZVkgPT09IDEgJiZcbiAgICByb3RhdGlvbiA9PT0gMCAmJlxuICAgIHNrZXdYID09PSAwICYmXG4gICAgc2tld1kgPT09IDAgJiZcbiAgICByZWdYID09PSAwICYmXG4gICAgcmVnWSA9PT0gMFxuICApIHtcbiAgICByZXR1cm47XG4gIH1cbiAgbGV0IGNvcywgc2luO1xuICBpZiAocm90YXRpb24gJSAzNjApIHtcbiAgICBjb25zdCByID0gcm90YXRpb24gKiBERUdfVE9fUkFEO1xuICAgIGNvcyA9IE1hdGguY29zKHIpO1xuICAgIHNpbiA9IE1hdGguc2luKHIpO1xuICB9IGVsc2Uge1xuICAgIGNvcyA9IDE7XG4gICAgc2luID0gMDtcbiAgfVxuXG4gIGNvbnN0IGEyID0gY29zICogc2NhbGVYO1xuICBjb25zdCBiMiA9IHNpbiAqIHNjYWxlWDtcbiAgY29uc3QgYzIgPSAtc2luICogc2NhbGVZO1xuICBjb25zdCBkMiA9IGNvcyAqIHNjYWxlWTtcblxuICBpZiAoc2tld1ggfHwgc2tld1kpIHtcbiAgICBjb25zdCBiMSA9IE1hdGgudGFuKHNrZXdZICogREVHX1RPX1JBRCk7XG4gICAgY29uc3QgYzEgPSBNYXRoLnRhbihza2V3WCAqIERFR19UT19SQUQpO1xuICAgIGFwcGVuZChhMiArIGMxICogYjIsIGIxICogYTIgKyBiMiwgYzIgKyBjMSAqIGQyLCBiMSAqIGMyICsgZDIsIHgsIHkpO1xuICB9IGVsc2Uge1xuICAgIGFwcGVuZChhMiwgYjIsIGMyLCBkMiwgeCwgeSk7XG4gIH1cblxuICBpZiAocmVnWCB8fCByZWdZKSB7XG4gICAgLy8gYXBwZW5kIHRoZSByZWdpc3RyYXRpb24gb2Zmc2V0OlxuICAgIHR4IC09IHJlZ1ggKiBhICsgcmVnWSAqIGM7XG4gICAgdHkgLT0gcmVnWCAqIGIgKyByZWdZICogZDtcbiAgICBoYXNJbml0aWFsU3RhdGUgPSBmYWxzZTtcbiAgfVxufVxuIl19